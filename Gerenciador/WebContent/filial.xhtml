<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">


<ui:composition template="template.xhtml">
<ui:define name="titulo">Gerenciamento de Filiais</ui:define>

<h:head></h:head>
    
    <ui:define name="conteudo"> 
	   <p:growl id="msg" life="5000"/>
	<h:form id="formFilial">
	
		<p:panelGrid columns="2">
			<p:outputLabel value="Nome:" for="@next" />
			<p:inputText  required="true" value="#{filialBean.filial.nome}" />
			<p:outputLabel value="CNPJ:" for="@next" />
			<p:inputText  required="true" value="#{filialBean.filial.cnpj}"  />
			<p:outputLabel value="Informações" />
			<p:outputLabel value=" do Endereço" />
			<p:outputLabel value="Rua:" for="@next" />
			<p:inputText required="true" value="#{filialBean.endereco.rua}"  />
			<p:outputLabel value="Número:" for="@next"/>
			<p:inputText required="true" value="#{filialBean.endereco.numero}"  />
			<p:outputLabel value="Bairro:" for="@next" />
			<p:inputText required="true" value="#{filialBean.endereco.bairro}" />
			<p:outputLabel value="Cidade:" for="@next"/>
			<p:inputText required="true" value="#{filialBean.endereco.cidade}"  />
			<p:outputLabel value="CEP:" for="@next"/>
			<p:inputText required="true" value="#{filialBean.endereco.cep}" />
	
			<p:commandButton action="#{filialBean.gravar()}" value="Gravar"
			process="@form" update="@form,msg,formEdit"/>
		</p:panelGrid>
	   </h:form>

	   <h:form id="formEdit">
		<p:dataTable value="#{filialBean.filiais}" var="filialAtual" border="1">
		   <p:column headerText="Nome">
				<h:outputText value="#{filialAtual.nome}" />
		   </p:column>
		   <p:column headerText="CNPJ">
				<h:outputText value= "#{filialBean.formatarCNPJ(filialAtual.cnpj)}" />
			</p:column>
			<p:column headerText="Rua">
				<h:outputText value="#{filialAtual.endereco.rua}" />
			</p:column>
			<p:column headerText="Número">
				<h:outputText value="#{filialAtual.endereco.numero}" />
			</p:column>
			<p:column headerText="Bairro">
				<h:outputText value="#{filialAtual.endereco.bairro}" />
			</p:column>
		    	<p:column headerText="Cidade">
				<h:outputText value="#{filialAtual.endereco.cidade}" />
			</p:column>
		   	<p:column headerText="CEP">
				<h:outputText value="#{filialAtual.endereco.cep}" />
			</p:column>
				<p:column headerText="Funcionários">
				<h:outputText value="#{filialAtual.totalFuncionarios}" />
			</p:column>
			<p:column>
				<f:facet name="header">Ações</f:facet>
				<p:commandButton action="#{filialBean.carregarFilial(filialAtual)}" value="Editar"
				process="@form" update=":formFilial"/>	
			</p:column>
		</p:dataTable>
	  </h:form>
    </ui:define>
  </ui:composition> 
</html>
